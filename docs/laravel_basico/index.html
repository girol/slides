<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>slides</title>

    <meta name="description" content="slides para treinamento na USP">
    <meta name="author" content="uspdev">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/league.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="css/highlight/styles/zenburn.css" id="highlight-theme">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <link rel="stylesheet" href="css/custom.css">

  </head>

  <body>

    <div class="reveal">
      <div class="slides"><section id="chapter-intro" class="chapter">
<section id="intro-uspdev" class="slide" data-has-notes="false">
<h2>Laravel Básico</h2><p><img src="./images/uspdev.png" height="220px" /></p>
</section>

<section id="intro-topicos" class="slide" data-has-notes="false">
<h2>Frameworks</h2><ul>
<li>não reinventar a roda</li>
<li>segurança</li>
<li>abstração e desacoplamento</li>
<li>boas práticas, ex: MVC</li>
</ul>
<p><img src="./images/mvc.jpg"></p>
</section>

<section id="intro-model" class="slide" data-has-notes="false">
<h2>Model usado neste curso</h2><p>Implementaremos as camadas MVC para manipular os dados desse 
<em>schema</em>:</p>
<p><img src="./images/model.png"></p>
</section>
</section>

<section id="chapter-infra" class="chapter">
<section id="infra-infra" class="slide" data-has-notes="false">
<h1>Preparação da infra</h1>

<p><img src="./images/construction-company.png" height="400px" /></p>
</section>

<section id="infra-requisitos" class="slide" data-has-notes="false">
<h2>Requisitos mínimos</h2><ul>
<li>php7+</li>
<li>mysql-server</li>
<li>composer</li>
<li>git</li>
</ul>
<p><br>
<br></p>
<h2>Good luck for you!</h2>
</section>

<section id="infra-ova" class="slide" data-has-notes="false">
<h3>Dica 1</h3><p><img src="./images/virtualbox.png" height="130px"></p>
<p>Instale o Virtualbox em seu SO:</p>
<pre><code><span class="hljs-symbol">https:</span>//www.virtualbox<span class="hljs-meta">.org</span>/wiki/Downloads
</code></pre><p>Importar .ova com tudo que é necessário para os treinamentos:</p>
<pre><code><span class="hljs-symbol">https:</span><span class="hljs-comment">//uspdev.github.io/treinamentos</span>
</code></pre>
</section>

<section id="infra-vagrant" class="slide" data-has-notes="false">
<h3>Dica 2</h3><p><img src="./images/vagrant.png" height="130px"></p>
<pre><code><span class="hljs-built_in">mkdir</span> myvm &amp;&amp; <span class="hljs-built_in">cd</span> myvm
vagrant init bento/ubuntu-<span class="hljs-number">16</span>.<span class="hljs-number">04</span>
</code></pre><p>Adicionar IP para acesso externo:</p>
<pre><code><span class="hljs-selector-tag">config</span><span class="hljs-selector-class">.vm</span><span class="hljs-selector-class">.network</span> <span class="hljs-selector-pseudo">:private_network</span>, <span class="hljs-selector-tag">ip</span>: "192<span class="hljs-selector-class">.168</span><span class="hljs-selector-class">.100</span><span class="hljs-selector-class">.200</span>"
</code></pre><p>Logar na nova VM:</p>
<pre><code><span class="hljs-attribute">vagrant up
vagrant ssh</span>
</code></pre>
</section>

<section id="infra-ondrej" class="slide" data-has-notes="false">
<h3>Dica 3</h3><p><img src="./images/php7.jpg" height="200px"></p>
<p>PPA do ondrej:</p>
<pre><code>sudo<span class="hljs-built_in"> add-apt-repository </span>-y ppa:ondrej/php
sudo apt-get update
</code></pre><p>Libs mínimas para rodar o Laravel:</p>
<pre><code><span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-xml</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-intl</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-mbstring</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-mysql</span>
</code></pre>
</section>

<section id="infra-composer" class="slide" data-has-notes="false">
<h2>Composer</h2><p><img src="./images/orchestra.jpg" height="280px"></p>
<p>Instalação do composer globalmente:</p>
<pre><code>curl -s <span class="hljs-string">https:</span><span class="hljs-comment">//getcomposer.org/installer | php</span>
sudo mv composer.phar <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>composer
</code></pre>
</section>

<section id="infra-git" class="slide" data-has-notes="false">
<h3>Git</h3><p><img src="./images/git.png" height="240px"></p>
<pre><code>sudo apt-<span class="hljs-builtin-name">get</span> install -y git
</code></pre><p>Configurações globais:</p>
<pre><code>git<span class="hljs-built_in"> config </span>--global user.name <span class="hljs-string">"joazinho"</span>
git<span class="hljs-built_in"> config </span>--global user.email <span class="hljs-string">"joaozinho@usp.br"</span>
</code></pre>
</section>

<section id="infra-mysql" class="slide" data-has-notes="false">
<h3>Mysql</h3><p><img src="./images/db.png" height="220px"></p>
<pre><code>sudo apt -y <span class="hljs-keyword">install</span> mysql-<span class="hljs-keyword">server</span>
</code></pre><p>Criando usuário e banco:</p>
<pre><code>sudo mysql
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> disciplinas;
<span class="hljs-keyword">GRANT</span> ALL <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> disciplinas.* <span class="hljs-keyword">to</span> disciplinas@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">identified</span> <span class="hljs-keyword">by</span> <span class="hljs-string">'disciplinas'</span>;
quit
</code></pre>
</section>
</section>

<section id="chapter-laravel" class="chapter">
<section id="laravel-intro" class="slide" data-has-notes="false">
<h2>Criando projeto com laravel</h2><p><br><br><br>
<img src="./images/laravel.png"></p>
</section>

<section id="laravel-laravel" class="slide" data-has-notes="false">
<h3>Projeto disciplinas</h3><p>Instalação com composer:</p>
<pre><code><span class="hljs-string">composer </span><span class="hljs-built_in">create-project</span> <span class="hljs-string">laravel/</span><span class="hljs-string">laravel </span><span class="hljs-string">disciplinas_seunome</span>
</code></pre><p>Inserir informações do banco de dados:</p>
<pre><code><span class="hljs-selector-tag">vim</span> <span class="hljs-selector-class">.env</span>
</code></pre><p>Se estiver tudo correto:</p>
<pre><code><span class="hljs-attribute">php artisan serve</span>
</code></pre>
</section>

<section id="laravel-github" class="slide" data-has-notes="false">
<h3>github</h3><p><img src="./images/github.png" height="200px"></p>
<ul>
<li>Fazer fork do projeto disciplinas_<strong>seunome</strong></li>
<li>Inicializar o projeto local com git</li>
<li>Adicionar e commitar mudanças na master</li>
<li>Adicionar remotes: <em>origin</em> e <em>upstream</em></li>
<li>Criar PR do fork:master para upstream:master</li>
</ul>
</section>
</section>

<section id="chapter-basico" class="chapter">
<section id="basico-00.intro" class="slide" data-has-notes="false">
<p><br><br></p>
<h1>Workflow básico do framework</h1>
</section>

<section id="basico-controller" class="slide" data-has-notes="false">
<h3>Meu primeiro controller:</h3><pre><code><span class="php"><span class="hljs-meta">&lt;?php</span> 
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Controllers</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OlaController</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gritar</span><span class="hljs-params">()</span>
    </span>{ 
        <span class="hljs-keyword">return</span> <span class="hljs-string">'OLLLLLÁÁÁÁ'</span>;
    }
}</span>
</code></pre><h3>Minha primeira rota:</h3><pre><code><span class="hljs-attribute">No</span> arquivo routes/web.php:

Route::get(<span class="hljs-string">'/gritar'</span>,<span class="hljs-string">'OlaController<span class="hljs-variable">@gritar</span>'</span>);
</code></pre>
</section>

<section id="basico-view" class="slide" data-has-notes="false">
<h3>Que tal retornar um template?</h3><pre><code><span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">view</span><span class="hljs-params">(<span class="hljs-string">'gritar'</span>)</span></span>;
</code></pre><h3>Template blade:</h3><pre><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>OLLLLÁÁÁÁ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre><h3>Enviando variáveis para o template</h3><pre><code><span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">view</span><span class="hljs-params">(<span class="hljs-string">'gritar'</span>,[<span class="hljs-string">'x'</span>=&gt;<span class="hljs-string">'OLLLÁÁÁ'</span>])</span></span>;
</code></pre><h3>No template</h3><pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> </span><span class="hljs-template-variable">{{ $x }}</span><span class="xml"> <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
</code></pre>
</section>

<section id="basico-rotas" class="slide" data-has-notes="false">
<h3>Parâmetro na rota:</h3><pre><code>Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/gritar/{nome}'</span>,<span class="hljs-string">'OlaController@gritar'</span>);
</code></pre><h3>Recebendo parâmentro no controller:</h3><pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gritar</span><span class="hljs-params">($nome)</span>
</span>{ 
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'gritar'</span>,[<span class="hljs-string">'x'</span>=&gt;<span class="hljs-string">"OLLLLLÁÁÁÁ {$nome}"</span>);
}
</code></pre><p><strong>!!! Volte a master no estado do último commit  !!! </strong></p>
</section>
</section>

<section id="chapter-disciplinas" class="chapter">
<section id="disciplinas-intro" class="slide" data-has-notes="false">
<p><br><br><br><br></p>
<h1>Disciplinas</h1>
</section>

<section id="disciplinas-migration" class="slide" data-has-notes="false">
<p>Gerar model para Disciplina:</p>
<pre><code><span class="hljs-selector-tag">php</span> <span class="hljs-selector-tag">artisan</span> <span class="hljs-selector-tag">make</span><span class="hljs-selector-pseudo">:model</span> <span class="hljs-selector-tag">Disciplina</span> <span class="hljs-selector-tag">-crm</span>
</code></pre><p>Edita migrations e inserir campos para titulo e ementa:</p>
<pre><code>$<span class="hljs-function"><span class="hljs-title">table</span>-&gt;</span>string(<span class="hljs-string">'titulo'</span>);
$<span class="hljs-function"><span class="hljs-title">table</span>-&gt;</span><span class="hljs-keyword">text</span>(<span class="hljs-string">'ementa'</span>);
</code></pre><p>Rodar migrations:</p>
<pre><code><span class="hljs-attribute">php artisan migrate</span>
</code></pre><p>Cadastrar disciplinas usando tinker:</p>
<pre><code><span class="hljs-attribute">php artisan tinker</span>
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="disciplinas-index" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Página para listar disciplinas cadastradas</h2>
</section>

<section id="disciplinas-rotas" class="slide" data-has-notes="false">
<p>Rota para listar as disciplinas criadas com tinker:</p>
<pre><code>Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/'</span>,<span class="hljs-string">'DisciplinaController@index'</span>);
</code></pre><p>Implementar método index do controller disciplina:</p>
<pre><code><span class="hljs-keyword">return</span> Disciplina::<span class="hljs-keyword">all</span>();
</code></pre><p>Agora usando view:</p>
<pre><code><span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.index'</span>,[<span class="hljs-string">'disciplinas'</span> =&gt; $disciplinas]);
</code></pre>
</section>

<section id="disciplinas-template" class="slide" data-has-notes="false">
<p>Template para listar disciplinas:</p>
<pre><code><span class="hljs-comment"># resources/views/disciplinas/index.blade.php</span>

&lt;ul&gt;
@<span class="hljs-keyword">foreach</span> ($disciplinas <span class="hljs-keyword">as</span> $disciplina)
    &lt;li&gt;{{ $disciplina-&gt;titulo }} &lt;/li&gt;
@<span class="hljs-keyword">endforeach</span>
&lt;/ul&gt;
</code></pre><p>Qual você prefere?</p>
<pre><code><span class="hljs-number">1</span>: [<span class="hljs-string">'disciplinas'</span> =&gt; $disciplinas]
<span class="hljs-number">2</span>: compact(<span class="hljs-string">'disciplinas'</span>)
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="disciplinas-create" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Formulário para cadastro de disciplina</h2>
</section>

<section id="disciplinas-cadastro" class="slide" data-has-notes="false">
<p>Criar um formumário html para cadastro de disciplina:</p>
<pre><code>&lt;form method=<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span> action=<span class="hljs-string">"/disciplinas"</span>&gt;
    {{ csrf_field() }}
    Nome: &lt;input name=<span class="hljs-string">"titulo"</span>&gt;
    Ementa: &lt;textarea name=<span class="hljs-string">"ementa"</span>&gt; &lt;/textarea&gt;
    &lt;button type=<span class="hljs-string">"submit"</span>&gt; Salvar &lt;/button&gt;
&lt;/form&gt;
</code></pre><p>Rota para cadastro de Disciplinas:</p>
<pre><code>Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/disciplinas/create'</span>,<span class="hljs-string">'DisciplinaController@create'</span>);
</code></pre><p>No método create retornar o formulário:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">view</span><span class="hljs-params">(<span class="hljs-string">'disciplinas.create'</span>)</span></span>;
</code></pre>
</section>

<section id="disciplinas-store" class="slide" data-has-notes="false">
<p>Rota para submissão:</p>
<pre><code>Route::post(<span class="hljs-string">'/disciplinas'</span>,<span class="hljs-string">'DisciplinaController@store'</span>);
</code></pre><p>No método store, salvar no banco de dados:</p>
<pre><code> $disciplina = <span class="hljs-keyword">new</span> Disciplina;
 $disciplina-&gt;titulo = $request-&gt;titulo;
 $disciplina-&gt;ementa = $request-&gt;ementa;
 $disciplina-&gt;save();
 <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'/'</span>);
</code></pre><p>Agora podemos colocar um botão no index.blade.php para cadastrar nova disciplina. Do it!</p>
<div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="disciplinas-showdisciplina" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Show: página para mostrar disciplina e ementa</h2>
</section>

<section id="disciplinas-show" class="slide" data-has-notes="false">
<p>Implementar o método show para disciplina:</p>
<pre><code><span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.show'</span>,compact(<span class="hljs-string">'disciplina'</span>));
</code></pre><p>Rota para show:</p>
<pre><code><span class="hljs-attribute">Route</span>::get(<span class="hljs-string">'/disciplinas/{disciplina},'</span>DisciplinaController<span class="hljs-variable">@show</span>');
</code></pre><p>Template para show:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><span class="hljs-template-variable">{{ $disciplina-&gt;titulo }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">{{ $disciplina-&gt;ementa }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
</code></pre><p>Link em index.blade.php</p>
<pre><code>&lt;a <span class="hljs-attribute">href</span>=<span class="hljs-string">"/disciplinas/{{ <span class="hljs-variable">$disciplina</span>-&gt;id }}"</span>&gt;
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="disciplinas-editdisciplina" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Edição de disciplina</h2>
</section>

<section id="disciplinas-edit" class="slide" data-has-notes="false">
<p>Rota para edição:</p>
<pre><code>Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/disciplinas/{disciplina}/edit'</span>,<span class="hljs-string">'DisciplinaController@edit'</span>);    
</code></pre><p>Formulário para editar disciplina:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/disciplinas/</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;id  }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>
    </span><span class="hljs-template-variable">{{ csrf_field() }}</span><span class="xml">
    </span><span class="hljs-template-variable">{{ method_field('patch') }}</span><span class="xml">
    Nome: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"titulo"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;titulo }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>
    Ementa: <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ementa"</span>&gt;</span> </span><span class="hljs-template-variable">{{ $disciplina-&gt;ementa }}</span><span class="xml"> <span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span> Salvar <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
</code></pre><p>Renderizar formulário no método edit:</p>
<pre><code><span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.edit'</span>,compact(<span class="hljs-string">'disciplina'</span>));
</code></pre>
</section>

<section id="disciplinas-update" class="slide" data-has-notes="false">
<p>Rota para persistir mudanças:</p>
<pre><code>Route::patch(<span class="hljs-string">'/disciplinas/{disciplina}'</span>,<span class="hljs-string">'DisciplinaController@update'</span>);
</code></pre><p>Persistir mudança no método update:</p>
<pre><code>    <span class="hljs-variable">$disciplina</span>-&gt;titulo = <span class="hljs-variable">$request</span>-&gt;titulo;
    <span class="hljs-variable">$disciplina</span>-&gt;ementa = <span class="hljs-variable">$request</span>-&gt;ementa;
    <span class="hljs-variable">$disciplina</span>-&gt;save();
    <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">"/disciplinas/$disciplina-&gt;id"</span>);
</code></pre><p>Em index.blade.php inserir link de edição de disciplina:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/disciplinas/</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;id }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">/edit"</span>&gt;</span> Editar <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="disciplinas-deletedisciplina" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Deletar disciplina</h2>
</section>

<section id="disciplinas-delete" class="slide" data-has-notes="false">
<p>Rota para delete:</p>
<pre><code>Route::<span class="hljs-keyword">delete</span>(<span class="hljs-string">'/disciplinas/{disciplina}'</span>,<span class="hljs-string">'DisciplinaController@destroy'</span>);
</code></pre><p>Fazer um formumlário de delete em index.blade.php:</p>
<pre><code>&lt;form method=<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span> action=<span class="hljs-string">"/disciplina/{{ $disciplina-&gt;id }}"</span>&gt;
    {{ csrf_field() }} 
    {{ method_field('delete') }}
    &lt;button type=<span class="hljs-string">"submit"</span>&gt;Apagar&lt;/button&gt;
&lt;/form&gt;
</code></pre><p>Implementar o método destroy:</p>
<pre><code><span class="hljs-variable">$disciplina</span>-&gt;delete();
<span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'/'</span>);
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>
</section>

<section id="chapter-bootstrap" class="chapter">
<section id="bootstrap-intro" class="slide" data-has-notes="false">
<p><img src="../../images/bootstrap.jpg"></p>
</section>

<section id="bootstrap-example" class="slide" data-has-notes="false">
<p>Vamos usar o exemplo do bootstrap:</p>
<pre><code><span class="hljs-attribute">sticky-footer-navbar</span>
</code></pre><p>Adaptar o layout para nosso projeto:</p>
<ul>
<li>Copiar o index para layouts/master.blade.php</li>
<li>Copiar o css do tema para public/css/app.css (BAD PRACTICE)</li>
<li>Colocar link de app.css no master.blade.php</li>
<li>Limpar conteúdo e criar uma seção content: </li>
</ul>
<pre><code>@<span class="hljs-built_in">yield</span> (<span class="hljs-string">'content'</span>)
</code></pre>
</section>

<section id="bootstrap-cdn" class="slide" data-has-notes="false">
<p>Mude tudo para CDN (BAD PRACTICE)</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://code.jquery.com/jquery-3.2.1.slim.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>Datepicker:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/locales/bootstrap-datepicker.pt-BR.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</section>

<section id="bootstrap-extends" class="slide" data-has-notes="false">
<p>Nas views de index, edit, show e create estender master e usar a seção:</p>
<pre><code><span class="hljs-variable">@extends</span> (<span class="hljs-string">'master'</span>)
<span class="hljs-variable">@section</span> (<span class="hljs-string">'content'</span>)
    seu conteúdo
<span class="hljs-variable">@endsection</span>
</code></pre><p><strong>Now we have power!</strong></p>
<p>Use as classes do bootstrap para deixar mais <em>bunitinho</em> (tabelas, buttons e forms)</p>
<div style="color:red;">!!! please commit this !!!</div>
</section>
</section>

<section id="chapter-turma" class="chapter">
<section id="turma-intro" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Cadastro de turma nas disciplinas</h2>
</section>

<section id="turma-migration" class="slide" data-has-notes="false">
<p>Criar o model para cadastro de turma:</p>
<pre><code><span class="hljs-selector-tag">php</span> <span class="hljs-selector-tag">artisan</span> <span class="hljs-selector-tag">make</span><span class="hljs-selector-pseudo">:model</span> <span class="hljs-selector-tag">Turma</span> <span class="hljs-selector-tag">-m</span>
</code></pre><p>Inserir os campos na migration:</p>
<pre><code><span class="hljs-variable">$table</span>-&gt;string(<span class="hljs-string">'ministrante'</span>);
<span class="hljs-variable">$table</span>-&gt;date(<span class="hljs-string">'inicio'</span>);
<span class="hljs-variable">$table</span>-&gt;date(<span class="hljs-string">'fim'</span>);
<span class="hljs-variable">$table</span>-&gt;text(<span class="hljs-string">'bibliografia'</span>)-&gt;nullable();
<span class="hljs-variable">$table</span>-&gt;integer(<span class="hljs-string">'disciplina_id'</span>)-&gt;unsigned();
<span class="hljs-variable">$table</span>-&gt;foreign(<span class="hljs-string">'disciplina_id'</span>)-&gt;references(<span class="hljs-string">'id'</span>)-&gt;on(<span class="hljs-string">'disciplinas'</span>);
</code></pre><p>Rodar migrations:</p>
<pre><code><span class="hljs-attribute">php artisan migrate</span>
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="turma-relacionamento" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Relacionamento entre turma e disciplina</h2>
</section>

<section id="turma-model" class="slide" data-has-notes="false">
<p>No model de disciplina:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">turmas</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;hasMany(<span class="hljs-string">'App\Turma'</span>);
}
</code></pre><p>No model Turma:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disciplina</span><span class="hljs-params">()</span>
</span>{   
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsTo(<span class="hljs-string">'App\Disciplina'</span>);
}
</code></pre>
</section>

<section id="turma-cadastroturma" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Cadastro de turma</h2>
</section>

<section id="turma-create" class="slide" data-has-notes="false">
<p>No controler de disciplina, método para inserção de turma:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createTurma</span><span class="hljs-params">($disciplina_id)</span>
</span>{
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.turmas.create'</span>,compact(<span class="hljs-string">'disciplina_id'</span>));
}
</code></pre><p>Rota para inserir turma:</p>
<pre><code>Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/disciplinas/{disciplina_id}/turmas/create'</span>,<span class="hljs-string">'DisciplinaController@createTurma'</span>);
</code></pre><p>Botão para inserir turma no show de disciplina:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/disciplinas/</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;id }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">/turmas/create"</span>&gt;</span>Inserir Turma<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
</code></pre>
</section>

<section id="turma-form" class="slide" data-has-notes="false">
<p>Formulário para cadastro de turma:</p>
<pre><code>&lt;<span class="hljs-selector-tag">form</span> method=<span class="hljs-string">"POST"</span> action=<span class="hljs-string">"/disciplinas/{{ $disciplina_id }}/turmas"</span>&gt;
    {{ csrf_field() }}

    Ministrante: &lt;<span class="hljs-selector-tag">input</span> name=<span class="hljs-string">"ministrante"</span>&gt;

    Data <span class="hljs-keyword">in</span>ício: &lt;<span class="hljs-selector-tag">input</span> name=<span class="hljs-string">"inicio"</span>&gt;

    Data fim: &lt;<span class="hljs-selector-tag">input</span> name=<span class="hljs-string">"fim"</span>&gt;

    Bibliografia: &lt;<span class="hljs-selector-tag">textarea</span> name=<span class="hljs-string">"bibliografia"</span>&gt;&lt;/textarea&gt;

    &lt;<span class="hljs-selector-tag">button</span> type=<span class="hljs-string">"submit"</span> class=<span class="hljs-string">"btn btn-success"</span>&gt; Salvar &lt;/button&gt;
&lt;/form&gt;
</code></pre>
</section>

<section id="turma-store" class="slide" data-has-notes="false">
<p>Criar uma rota para store de turma:</p>
<pre><code>Route::post(<span class="hljs-string">'/disciplinas/{disciplina_id}/turmas'</span>,<span class="hljs-string">'DisciplinaController@storeTurma'</span>);
</code></pre><p>Criar o método store turma:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">storeTurma</span><span class="hljs-params">(Request $request, $disciplina_id)</span>
</span>{
    $turma = <span class="hljs-keyword">new</span> \App\Turma;
    $turma-&gt;ministrante = $request-&gt;ministrante;
    $turma-&gt;inicio = $request-&gt;inicio;
    $turma-&gt;fim = $request-&gt;fim;
    $turma-&gt;bibliografia = $request-&gt;bibliografia;
    $turma-&gt;disciplina_id = $request-&gt;disciplina_id;
    $turma-&gt;save();
    <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">"/disciplinas/$disciplina_id"</span>);
}
</code></pre><p>Que tal usar o relacionamento?</p>
<pre><code>Disciplina::find<span class="hljs-function"><span class="hljs-params">($disciplina_id)</span>-&gt;</span>turmas<span class="hljs-function"><span class="hljs-params">()</span>-&gt;</span>save($turma);
</code></pre>
</section>

<section id="turma-disciplina" class="slide" data-has-notes="false">
<p>Mostrar as turmas, no show da disciplina:</p>
<pre><code>@<span class="hljs-keyword">foreach</span> ($disciplina-&gt;turmas <span class="hljs-keyword">as</span> $turma)
    {{ $turma-&gt;ministrante }}
    {{ $turma-&gt;inicio }}
@<span class="hljs-keyword">endforeach</span>
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="turma-date" class="slide" data-has-notes="false">
<p>Que tal formatar as datas no blade?</p>
<pre><code>Carbon\<span class="hljs-symbol">Carbon:</span><span class="hljs-symbol">:parse</span>(<span class="hljs-variable">$turma</span>-&gt;inicio)-&gt;format(<span class="hljs-string">'d/m/Y'</span>) 
</code></pre><p>Que tal usar um calendário no cadastrato da turma?</p>
<pre><code>$(<span class="hljs-string">'.datepicker'</span>).datepicker({
    <span class="hljs-keyword">format</span>: <span class="hljs-string">'dd/mm/yyyy'</span>,
    language: <span class="hljs-string">'pt-BR'</span>
});
</code></pre><p>No controller:</p>
<pre><code><span class="hljs-keyword">use</span> <span class="hljs-title">Carbon</span>\<span class="hljs-title">Carbon</span>;
Carbon::createFromFormat(<span class="hljs-string">'d/m/Y'</span>, $request-&gt;inicio)
</code></pre><p>Que tal ordernar pela da de início?</p>
<pre><code>@<span class="hljs-keyword">foreach</span> ($disciplina-&gt;turmas-&gt;sortByDesc(<span class="hljs-string">'inicio'</span>) <span class="hljs-keyword">as</span> $turma)
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>

<section id="turma-implement_login" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Autenticação</h2>
</section>

<section id="turma-auth" class="slide" data-has-notes="false">
<p>Autenticação:</p>
<pre><code><span class="hljs-selector-tag">php</span> <span class="hljs-selector-tag">artisan</span> <span class="hljs-selector-tag">make</span><span class="hljs-selector-pseudo">:auth</span>
</code></pre><p>Deixar os métodos index e show publico e os demais privados.</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">$this</span>-&gt;middleware(<span class="hljs-string">'auth'</span>)-&gt;except([<span class="hljs-string">'index'</span>,<span class="hljs-string">'show'</span>]);
}
</code></pre>
</section>

<section id="turma-login" class="slide" data-has-notes="false">
<p>Inserir botão de login no master.blade.php</p>
<pre><code><span class="xml">@auth
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"logout-form"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{ route('logout') }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span> 
        </span><span class="hljs-template-variable">{{ csrf_field() }}</span><span class="xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Sair <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
@else
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{ route('login') }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>Login<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{ route('register') }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>Register<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
@endauth</span>
</code></pre><p>Nas views geradas na pasta resources/views/auth 
extender layout padrão:</p>
<pre><code>@<span class="hljs-keyword">extends</span>('<span class="hljs-keyword">layouts</span>.<span class="hljs-keyword">master</span>')
</code></pre>
</section>

<section id="turma-email" class="slide" data-has-notes="false">
<p>Configure log local para testes:</p>
<pre><code>storage/logs/laravel.<span class="hljs-built_in">log</span>
</code></pre><p><em>task</em>: Esconder o botão cadastrar disciplina e cadastrar turma para não logados</p>
<div style="color:red;">!!! please commit this !!!</div>
</section>
</section>

<section id="chapter-search" class="chapter">
<section id="search-intro" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Search</h2>
</section>

<section id="search-controller" class="slide" data-has-notes="false">
<p>Buscar:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span><span class="hljs-params">(Request $request)</span>
</span>{
    $text = $request-&gt;text;
    $disciplinas = Disciplina::where(<span class="hljs-string">'titulo'</span>, <span class="hljs-string">'LIKE'</span>, <span class="hljs-string">"%{$text}%"</span>)-&gt;get();
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.index'</span>,compact(<span class="hljs-string">'disciplinas'</span>));
}
</code></pre><p>Rota:</p>
<pre><code>Route::post(<span class="hljs-string">'/disciplinas/search'</span>,<span class="hljs-string">'DisciplinaController@search'</span>);
</code></pre>
</section>

<section id="search-form" class="slide" data-has-notes="false">
<p>Campo de busca:</p>
<pre><code>&lt;form method=<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span> action=<span class="hljs-string">"/disciplinas/search"</span>&gt;
    {{ csrf_field() }}
    &lt;input name=<span class="hljs-string">"text"</span> type=<span class="hljs-string">"text"</span>&gt;
    &lt;button type=<span class="hljs-string">"submit"</span>&gt; Buscar &lt;/button&gt;
&lt;/form&gt;
</code></pre><div style="color:red;">!!! please commit this !!!</div>
</section>
</section>

<section id="fim" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Obrigado!</h2>
</section></div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: Reveal.getQueryHash().transition || 'slide', // none/fade/slide/convex/concave/zoom

      // Optional reveal.js plugins
      dependencies: [
        //{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
      ]
    });
    </script>

    <script src="js/dynamic-theme.js"></script><script src="js/custom.js"></script>

  </body>
</html>
